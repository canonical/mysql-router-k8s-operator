{"uid":"6262290aad167356","name":"test_upgrade_from_edge","fullName":"tests.integration.test_upgrade#test_upgrade_from_edge","historyId":"59e96b2cf75bb30d0a5cbde0e5234d56","time":{"start":1724463465205,"stop":1724463652242,"duration":187037},"description":"Upgrade mysqlrouter while ensuring continuous writes incrementing.","descriptionHtml":"<p>Upgrade mysqlrouter while ensuring continuous writes incrementing.</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1724463339433,"stop":1724463339434,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1724463339434,"stop":1724463339434,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1724463339434,"stop":1724463339666,"duration":232},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1724463465205,"stop":1724463465205,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Upgrade mysqlrouter while ensuring continuous writes incrementing.","status":"passed","steps":[],"attachments":[{"uid":"3016194057ecaa23","name":"log","source":"3016194057ecaa23.txt","type":"text/plain","size":2230}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1724463652243,"stop":1724463652243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1724463868895,"stop":1724463869336,"duration":441},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1724463869337,"stop":1724463869337,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1724463869337,"stop":1724463869337,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1724463869337,"stop":1724463869337,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_upgrade"},{"name":"host","value":"fv-az887-303"},{"name":"thread","value":"12970-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_upgrade"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"ebf934b60cc04c8c","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":5,"broken":0,"skipped":7,"passed":73,"unknown":1,"total":86},"items":[{"uid":"f2442bdfb7c7ee58","reportUrl":"../1659//#testresult/f2442bdfb7c7ee58","status":"passed","time":{"start":1724377112254,"stop":1724377299339,"duration":187085}},{"uid":"be17a04cd5b252ee","reportUrl":"../1657//#testresult/be17a04cd5b252ee","status":"passed","time":{"start":1724290708523,"stop":1724290917556,"duration":209033}},{"uid":"eb1e5340fd65585b","reportUrl":"../1655//#testresult/eb1e5340fd65585b","status":"passed","time":{"start":1724204297791,"stop":1724204487585,"duration":189794}},{"uid":"6df5281b7e19badd","reportUrl":"../1648//#testresult/6df5281b7e19badd","status":"passed","time":{"start":1724117911032,"stop":1724118100062,"duration":189030}},{"uid":"a9d090a4cf8d589c","reportUrl":"../1641//#testresult/a9d090a4cf8d589c","status":"passed","time":{"start":1724031498631,"stop":1724031703890,"duration":205259}},{"uid":"8a11eaef2516d782","reportUrl":"../1640//#testresult/8a11eaef2516d782","status":"passed","time":{"start":1723945074641,"stop":1723945263972,"duration":189331}},{"uid":"aefb67439601d867","reportUrl":"../1639//#testresult/aefb67439601d867","status":"passed","time":{"start":1723858679713,"stop":1723858871832,"duration":192119}},{"uid":"29f7149f4dd8ebcf","reportUrl":"../1632//#testresult/29f7149f4dd8ebcf","status":"passed","time":{"start":1723772267214,"stop":1723772456887,"duration":189673}},{"uid":"868b11b2943c4403","reportUrl":"../1631//#testresult/868b11b2943c4403","status":"passed","time":{"start":1723685867967,"stop":1723686061521,"duration":193554}},{"uid":"51fd8d547fef542a","reportUrl":"../1628//#testresult/51fd8d547fef542a","status":"passed","time":{"start":1723599658695,"stop":1723599869262,"duration":210567}},{"uid":"972fab45684dbc6b","reportUrl":"../1625//#testresult/972fab45684dbc6b","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1723513285139,"stop":1723513285139,"duration":0}},{"uid":"267439ee7a7feda6","reportUrl":"../1613//#testresult/267439ee7a7feda6","status":"passed","time":{"start":1723427117687,"stop":1723427305167,"duration":187480}},{"uid":"ba7182cbc3d7350d","reportUrl":"../1612//#testresult/ba7182cbc3d7350d","status":"passed","time":{"start":1723340499982,"stop":1723340699049,"duration":199067}},{"uid":"3c11866feb546b51","reportUrl":"../1611//#testresult/3c11866feb546b51","status":"passed","time":{"start":1723254377755,"stop":1723254576730,"duration":198975}},{"uid":"d02618b1638eae7c","reportUrl":"../1606//#testresult/d02618b1638eae7c","status":"passed","time":{"start":1723167497842,"stop":1723167696359,"duration":198517}},{"uid":"a84e76a9dc1bb65d","reportUrl":"../1604//#testresult/a84e76a9dc1bb65d","status":"passed","time":{"start":1723081301566,"stop":1723081490354,"duration":188788}},{"uid":"3df5e8a2b7afee1b","reportUrl":"../1601//#testresult/3df5e8a2b7afee1b","status":"passed","time":{"start":1722994790424,"stop":1722994989663,"duration":199239}},{"uid":"44dc5f5efc86e2a0","reportUrl":"../1598//#testresult/44dc5f5efc86e2a0","status":"failed","statusDetails":"AssertionError: None of the units are upgraded\nassert '+testupgrade' in 'Model  Controller          Cloud/Region        Version  SLA          Timestamp\\ntest   microk8s-localhost  microk8s/localhost  3.4.3    unsupported  01:56:11Z\\n\\nApp               Version                  Status   Scale  Charm             Channel      Rev  Address         Exposed  Message\\nmysql-k8s         8.0.37-0ubuntu0.22.04.3  active       1  mysql-k8s         8.0/edge     171  10.152.183.90   no       \\nmysql-router-k8s  8.0.37-0ubuntu0.22.04.3  waiting      3  mysql-router-k8s                 0  10.152.183.56   no       installing agent\\nmysql-test-app    0.0.2                    active       1  mysql-test-app    latest/edge   46  10.152.183.183  no       \\n\\nUnit                 Workload     Agent  Address     Ports  Message\\nmysql-k8s/0*         active       idle   10.1.96.13         Primary\\nmysql-router-k8s/0*  active       idle   10.1.96.9          Router 8.0.37 running (restart pending); Charmed operator 1.2+266066c\\nmysql-router-k8s/1   active       idle   10.1.96.8          Router 8.0.37 running (restart pending); Charmed operator 1.2+266066c\\nmysql-router-k8s/2   maintenance  idle   10.1.96.14         \\nmysql-test-app/0*    active       idle   10.1.96.11         \\n'\n +  where 'Model  Controller          Cloud/Region        Version  SLA          Timestamp\\ntest   microk8s-localhost  microk8s/localhost  3.4.3    unsupported  01:56:11Z\\n\\nApp               Version                  Status   Scale  Charm             Channel      Rev  Address         Exposed  Message\\nmysql-k8s         8.0.37-0ubuntu0.22.04.3  active       1  mysql-k8s         8.0/edge     171  10.152.183.90   no       \\nmysql-router-k8s  8.0.37-0ubuntu0.22.04.3  waiting      3  mysql-router-k8s                 0  10.152.183.56   no       installing agent\\nmysql-test-app    0.0.2                    active       1  mysql-test-app    latest/edge   46  10.152.183.183  no       \\n\\nUnit                 Workload     Agent  Address     Ports  Message\\nmysql-k8s/0*         active       idle   10.1.96.13         Primary\\nmysql-router-k8s/0*  active       idle   10.1.96.9          Router 8.0.37 running (restart pending); Charmed operator 1.2+266066c\\nmysql-router-k8s/1   active       idle   10.1.96.8          Router 8.0.37 running (restart pending); Charmed operator 1.2+266066c\\nmysql-router-k8s/2   maintenance  idle   10.1.96.14         \\nmysql-test-app/0*    active       idle   10.1.96.11         \\n' = get_juju_status('test')\n +    where 'test' = <juju.model.Model object at 0x7f5f6a35d240>.name\n +      where <juju.model.Model object at 0x7f5f6a35d240> = <pytest_operator.plugin.OpsTest object at 0x7f5f6b0e3d90>.model","time":{"start":1722909048261,"stop":1722909371099,"duration":322838}},{"uid":"9099b6017e1ac8d5","reportUrl":"../1595//#testresult/9099b6017e1ac8d5","status":"failed","statusDetails":"AssertionError: None of the units are upgraded\nassert '+testupgrade' in 'Model  Controller          Cloud/Region        Version  SLA          Timestamp\\ntest   microk8s-localhost  microk8s/localhost  3.4.3    unsupported  01:57:41Z\\n\\nApp               Version                  Status   Scale  Charm             Channel      Rev  Address         Exposed  Message\\nmysql-k8s         8.0.37-0ubuntu0.22.04.3  active       1  mysql-k8s         8.0/edge     169  10.152.183.109  no       \\nmysql-router-k8s  8.0.37-0ubuntu0.22.04.3  waiting      3  mysql-router-k8s                 0  10.152.183.81   no       installing agent\\nmysql-test-app    0.0.2                    active       1  mysql-test-app    latest/edge   46  10.152.183.237  no       \\n\\nUnit                 Workload     Agent  Address      Ports  Message\\nmysql-k8s/0*         active       idle   10.1.178.77         Primary\\nmysql-router-k8s/0   active       idle   10.1.178.74         Router 8.0.37 running (restart pending); Charmed operator 1.2+266066c\\nmysql-router-k8s/1*  active       idle   10.1.178.75         Router 8.0.37 running (restart pending); Charmed operator 1.2+266066c\\nmysql-router-k8s/2   maintenance  idle   10.1.178.78         \\nmysql-test-app/0*    active       idle   10.1.178.72         \\n'\n +  where 'Model  Controller          Cloud/Region        Version  SLA          Timestamp\\ntest   microk8s-localhost  microk8s/localhost  3.4.3    unsupported  01:57:41Z\\n\\nApp               Version                  Status   Scale  Charm             Channel      Rev  Address         Exposed  Message\\nmysql-k8s         8.0.37-0ubuntu0.22.04.3  active       1  mysql-k8s         8.0/edge     169  10.152.183.109  no       \\nmysql-router-k8s  8.0.37-0ubuntu0.22.04.3  waiting      3  mysql-router-k8s                 0  10.152.183.81   no       installing agent\\nmysql-test-app    0.0.2                    active       1  mysql-test-app    latest/edge   46  10.152.183.237  no       \\n\\nUnit                 Workload     Agent  Address      Ports  Message\\nmysql-k8s/0*         active       idle   10.1.178.77         Primary\\nmysql-router-k8s/0   active       idle   10.1.178.74         Router 8.0.37 running (restart pending); Charmed operator 1.2+266066c\\nmysql-router-k8s/1*  active       idle   10.1.178.75         Router 8.0.37 running (restart pending); Charmed operator 1.2+266066c\\nmysql-router-k8s/2   maintenance  idle   10.1.178.78         \\nmysql-test-app/0*    active       idle   10.1.178.72         \\n' = get_juju_status('test')\n +    where 'test' = <juju.model.Model object at 0x7f53754cd030>.name\n +      where <juju.model.Model object at 0x7f53754cd030> = <pytest_operator.plugin.OpsTest object at 0x7f53752b3670>.model","time":{"start":1722822739445,"stop":1722823061607,"duration":322162}},{"uid":"f2aba4fc88b097ed","reportUrl":"../1594//#testresult/f2aba4fc88b097ed","status":"failed","statusDetails":"AssertionError: None of the units are upgraded\nassert '+testupgrade' in 'Model  Controller          Cloud/Region        Version  SLA          Timestamp\\ntest   microk8s-localhost  microk8s/localhost  3.4.3    unsupported  01:58:14Z\\n\\nApp               Version                  Status   Scale  Charm             Channel      Rev  Address         Exposed  Message\\nmysql-k8s         8.0.37-0ubuntu0.22.04.3  active       1  mysql-k8s         8.0/edge     169  10.152.183.65   no       \\nmysql-router-k8s  8.0.37-0ubuntu0.22.04.3  waiting      3  mysql-router-k8s                 0  10.152.183.227  no       installing agent\\nmysql-test-app    0.0.2                    active       1  mysql-test-app    latest/edge   46  10.152.183.208  no       Last written value=21472\\n\\nUnit                 Workload     Agent  Address      Ports  Message\\nmysql-k8s/0*         active       idle   10.1.148.13         Primary\\nmysql-router-k8s/0*  active       idle   10.1.148.9          Router 8.0.37 running (restart pending); Charmed operator 1.2+266066c\\nmysql-router-k8s/1   active       idle   10.1.148.11         Router 8.0.37 running (restart pending); Charmed operator 1.2+266066c\\nmysql-router-k8s/2   maintenance  idle   10.1.148.14         \\nmysql-test-app/0*    active       idle   10.1.148.8          Last written value=21472\\n'\n +  where 'Model  Controller          Cloud/Region        Version  SLA          Timestamp\\ntest   microk8s-localhost  microk8s/localhost  3.4.3    unsupported  01:58:14Z\\n\\nApp               Version                  Status   Scale  Charm             Channel      Rev  Address         Exposed  Message\\nmysql-k8s         8.0.37-0ubuntu0.22.04.3  active       1  mysql-k8s         8.0/edge     169  10.152.183.65   no       \\nmysql-router-k8s  8.0.37-0ubuntu0.22.04.3  waiting      3  mysql-router-k8s                 0  10.152.183.227  no       installing agent\\nmysql-test-app    0.0.2                    active       1  mysql-test-app    latest/edge   46  10.152.183.208  no       Last written value=21472\\n\\nUnit                 Workload     Agent  Address      Ports  Message\\nmysql-k8s/0*         active       idle   10.1.148.13         Primary\\nmysql-router-k8s/0*  active       idle   10.1.148.9          Router 8.0.37 running (restart pending); Charmed operator 1.2+266066c\\nmysql-router-k8s/1   active       idle   10.1.148.11         Router 8.0.37 running (restart pending); Charmed operator 1.2+266066c\\nmysql-router-k8s/2   maintenance  idle   10.1.148.14         \\nmysql-test-app/0*    active       idle   10.1.148.8          Last written value=21472\\n' = get_juju_status('test')\n +    where 'test' = <juju.model.Model object at 0x7f3e70b6c1f0>.name\n +      where <juju.model.Model object at 0x7f3e70b6c1f0> = <pytest_operator.plugin.OpsTest object at 0x7f3e71fb3ca0>.model","time":{"start":1722736371750,"stop":1722736694813,"duration":323063}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"6262290aad167356.json","parameterValues":[]}